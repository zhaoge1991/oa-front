<div class="row">
  <bar-common-action-bar [config]="commonActionBarConfig" [object]="data" (objectSave)="save($event)">
  </bar-common-action-bar>
</div>

<div class="row">
  <form class="form-horizontal" *ngIf="data">
    <ba-card baCardClass="with-scroll">
      <div class="row form-content">
        <div class="col-md-12 form-unite">
          <div class="row">
            <div class="col-md-4 col-xs-12">
              <div class="ng-form-group row">
                <label class="col-sm-4 ng-form-control-label">周报日</label>
                <div class="col-sm-8">
                  <ng-calender [(value)]="data.report_time" [placeholder]="'请选择时间'"></ng-calender>
                </div>
              </div>
            </div>
            <div class="col-md-8 col-xs-12">
              <div class="ng-form-group row">
                <div class="col-sm-8">
                  <div class="col-sm-2"><button (click)="getLastWeekData(data.report_time)" class="btn btn-primary  btn-sm" type="button">获取工作事项</button></div>
                </div>
              </div>
            </div>
            <div class="col-md-4 col-xs-12" *ngIf="isSale">
              <div class="ng-form-group row">
                <label for="week_sales_amount" class="col-sm-4 ng-form-control-label">本周成单金额</label>
                <div class="col-sm-8">
                  <input type="text" class="ng-form-control" id="week_sales_amount"  [(ngModel)]="data.week_sales_amount" name="week_sales_amount">
                </div>
              </div>
            </div>
            <div class="col-md-4 col-xs-12" *ngIf="isSale">
              <div class="ng-form-group row">
                <label for="month_amount" class="col-sm-4 ng-form-control-label">当月成单金额</label>
                <div class="col-sm-8">
                  <input type="text" class="ng-form-control" id="month_amount"  [(ngModel)]="data.month_amount" name="month_amount">
                </div>
              </div>
            </div>
            <div class="col-md-4 col-xs-12" *ngIf="isSale">
              <div class="ng-form-group row">
                <label for="sales_aims" class="col-sm-4 ng-form-control-label">月业绩目标</label>
                <div class="col-sm-8">
                  <input type="text" class="ng-form-control" id="sales_aims"  [(ngModel)]="data.sales_aims" name="sales_aims">
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-12 form-unite">
          <div class="row">
            <div class="col-md-12">
              <div class="ng-form-group row">
                <label class="col-sm-2 ng-form-control-label">上周工作计划</label>
                <div class="col-sm-11">
                  <div [innerHTML]="lastreport?lastreport.next_week_plan:'未找到上周工作计划'"></div>
                </div>
              </div>
            </div>
            <div class="col-md-12">
              <div class="ng-form-group row">
                <label class="col-sm-2 ng-form-control-label">本周完成事项</label>
                <div class="col-sm-11">
                  <div>
                    <p>完成事项：</p>
                    <p *ngFor="let task of tasks">{{task.date_complete}} {{task.name}}</p>
                    <p>指派事项：</p>
                    <p *ngFor="let mysourcetask of mysourcetasks">{{mysourcetask.date_complete}} {{mysourcetask.name}}</p>
                    <p>待办事项：</p>
                    <p *ngFor="let task of mytask">{{task.date_complete}} {{task.name}}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-12 form-unite">
          <div class="row">
            <div class="col-md-12" *ngIf="isSale">
              <div class="ng-form-group row">
                <label class="col-sm-12 ng-form-control-label">潜力成单客户记录（具体客户所询产品信息，大致跟进情况进展，个人想法，以及遇到的问题，个人的想法等）</label>
                <div class="col-sm-12">
                  <ng2-ueditor [(ngModel)]="data.potential_customer" name="potential_customer"></ng2-ueditor>
                </div>
              </div>
            </div>
            <div class="col-md-12" *ngIf="isSale">
              <div class="ng-form-group row">
                <label class="col-sm-12 ng-form-control-label">需重点开发跟进客户（具体客户所询产品信息，大致跟进情况进展，个人想法，以及遇到的问题，个人的想法等）</label>
                <div class="col-sm-12">
                  <ng2-ueditor [(ngModel)]="data.emphasis_customer" name="emphasis_customer"></ng2-ueditor>
                </div>
              </div>
            </div>
            <div class="col-md-12">
              <div class="ng-form-group row">
                <label class="col-sm-12 ng-form-control-label">工作中遇到的问题：（包括需要协助的问题或者自己存在的问题）</label>
                <div class="col-sm-12">
                  <ng2-ueditor [(ngModel)]="data.questions" name="questions"></ng2-ueditor>
                </div>
              </div>
            </div>
            <div class="col-md-12">
              <div class="ng-form-group row">
                <label class="col-sm-12 ng-form-control-label">下周我打算对哪些新的方面进行尝试：（主要写自己的思考以及对现有工作的突破和改进）</label>
                <div class="col-sm-12">
                  <ng2-ueditor [(ngModel)]="data.new_try" name="new_try"></ng2-ueditor>
                </div>
              </div>
            </div>
            <div class="col-md-12">
              <div class="ng-form-group row">
                <label class="col-sm-12 ng-form-control-label">下周工作计划</label>
                <div class="col-sm-12">
                  <ng2-ueditor [(ngModel)]="data.next_week_plan" name="next_week_plan"></ng2-ueditor>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ba-card>
  </form>
</div>



